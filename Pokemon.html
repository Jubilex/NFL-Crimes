<!DOCTYPE html>
<html>

<head>
	<title>Pokemon Pix</title>
</head>

<body>
	<input type="text" id="pokemonInput" />
	<button onclick="getPokemonImage()">Get Image</button>
	<img />
	<div id="errorMessage" style="color: red"></div>
</body>
<script>
	document.addEventListener("DOMContentLoaded", function (event) {
		// do work;
	});

	async function getPokemonImage() {
		const name = document.getElementById('pokemonInput').value;
		const pokemonImageUrl = getPokemonData(name);
		console.log('IMAGE URL');
		console.log(pokemonImageUrl);
		displayPokemon(pokemonImageUrl);
	}

	async function getPokemonData(nameFilter) {
		// SHOW WITHOUT PERPAGE AND ADD IT, STILL NOT BEST WAY BUT OK FOR NOW
		let foo = fetch('https://pokeapi.co/api/v2/pokemon/' + nameFilter);
		const res = await foo;
		if (res.status !== 200) {
			if (res.status === 404) {
				document.getElementById('errorMessage').innerHTML = "Could not find " + nameFilter;
			} else {
				document.getElementById('errorMessage').innerHTML = "Unknown error";
			}

		}
		console.log('INSIDE GETPOKENON DATA');
		const pokemon = await res.json();
		// CATCH 404
		console.log(pokemon);
		return pokemon;
//		const res = await fetch('https://www.balldontlie.io/api/v1/players?search=' + nameFilter + '&per_page=10');
//		const players = await res.json();
//		return players.data;
	}
	function displayPokemon(pokemon) {
		document.getElementsByTagName('img')[0].src = pokemon.sprites.back_default;
	}
</script>

</html>